<div style="margin-top: 30px; padding: 20px; background: #e8f4fd; border-radius: 8px; border: 1px solid #3498db;">
    <h3>Model Control</h3>
    <p>Clicking the button below will trigger <code>train.py</code> to pull all files listed above and generate a new <code>model.pkl</code>.</p>
    
    <button id="trainBtn" onclick="triggerTraining()" style="background: #27ae60; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
        ðŸš€ Retrain Model on Collective Memory
    </button>
    <div id="trainStatus" style="margin-top: 10px; font-weight: bold;"></div>
</div>

<script>
function triggerTraining() {
    const btn = document.getElementById('trainBtn');
    const status = document.getElementById('trainStatus');
    
    btn.disabled = true;
    status.innerText = "Training started in background... check GCS in ~30s.";
    status.style.color = "#2980b9";

    fetch('/trigger-train', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            status.innerText = "Success! New model is now live.";
            status.style.color = "#27ae60";
            btn.disabled = false;
        })
        .catch(err => {
            status.innerText = "Error triggering training.";
            status.style.color = "#e74c3c";
            btn.disabled = false;
        });
}
</script>
